/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 1.1.0
 *
 * Export Data Validation Module.
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){var e=function(e,o){return null===e||void 0===e||e==[]||""===e||o&&""===t.trim(e)},o=function(t,e,o,n){var a=screen.width/2-o/2,r=60,i=window.open("",e,"",!0);return i.close(),window.open(t,e,"toolbar=no, location=no, directories=no, status=yes, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+n+", top="+r+", left="+a)},n='<html style="display:table;width:100%;height:100%;"><title>Export Data - &copy; Krajee</title><body style="display:table-cell;font-family:Helvetica,Arial,sans-serif;color:#888;font-weight:bold;line-height:1.4em;text-align:center;vertical-align:middle;width:100%;height:100%;padding:0 10px;">{msg}</body></html>',a=function(t){if(e(t))return!0;try{return confirm(t)}catch(o){return!0}},r=function(e,o){this.$element=t(e);var n=o.settings;this.alertMsg=o.alertMsg,this.target=o.target,this.$form=t("#"+n.formId),this.messages=n.messages,this.popup="",this.listen()};r.prototype={constructor:r,notify:function(t){var o=this,n=o.messages,r=e(o.alertMsg)?"":o.alertMsg,i=e(n.allowPopups)?"":n.allowPopups,s=e(n.confirmDownload)?"":n.confirmDownload,l="";return l=r.length&&i.length?r+"\n\n"+i:!r.length&&i.length?i:r.length&&!i.length?r:"",s.length&&(l=l+"\n\n"+s),t.preventDefault(),e(l)?!0:a(l)},setPopupAlert:function(t){var e=this;if(void 0!=e.popup.document)if(arguments.length&&arguments[1]){var o=e.popup.document.getElementsByTagName("body");setTimeout(function(){o[0].innerHTML=t},4e3)}else{var a=n.replace("{msg}",t);e.popup.document.write(a)}},listen:function(){var e=this;e.$form.appendTo("body"),e.$element.on("click",function(n){if(e.notify(n)){var a=t(this).data("format");e.$form.find('[name="export_type"]').val(a),"_popup"==e.target&&(e.popup=o("","kvExportFullDialog",350,120),e.popup.focus(),e.setPopupAlert(e.messages.downloadProgress)),e.$form.trigger("submit")}}),"_popup"==e.target&&e.$form.on("submit",function(){setTimeout(function(){e.setPopupAlert(e.messages.downloadComplete,!0)},1e3)})}},t.fn.exportdata=function(e){var o=Array.apply(null,arguments);return o.shift(),this.each(function(){var n=t(this),a=n.data("exportdata"),i="object"==typeof e&&e;a||n.data("exportdata",a=new r(this,t.extend({},t.fn.exportdata.defaults,i,t(this).data()))),"string"==typeof e&&a[e].apply(a,o)})},t.fn.exportdata.defaults={filename:"export",target:"_popup",alertMsg:"",settings:{formId:"",messages:{allowPopups:"",confirmDownload:"",downloadProgress:"",downloadComplete:""}}}}(window.jQuery);